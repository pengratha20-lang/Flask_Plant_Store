<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Details - Green Bean</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/product.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/shop-layout.css') }}">
</head>
<body>
  <header class="shop-header fixed-top">
    <div class="container-fluid">
      <nav class="navbar navbar-expand-lg navbar-light py-3">
        <div class="container-fluid">
          <a class="navbar-brand d-flex align-items-center" href="{{ url_for('home.home') }}" id="brand-logo">
            <i class="fas fa-leaf me-2 text-success"></i>
            <span>Green Bean</span>
          </a>
          
          <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          
          <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
              <li class="nav-item"><a class="nav-link fw-semibold" href="{{ url_for('home.home') }}">Home</a></li>
              <li class="nav-item"><a class="nav-link fw-semibold" href="{{ url_for('shop.shop') }}">Shop</a></li>
              <li class="nav-item"><a class="nav-link fw-semibold" href="{{ url_for('home.home') }}#services">Services</a></li>
              <li class="nav-item"><a class="nav-link fw-semibold" href="{{ url_for('home.home') }}#about">About</a></li>
              <li class="nav-item"><a class="nav-link fw-semibold" href="{{ url_for('contact.contact') }}">Contact</a></li>
            </ul>
            
            <div class="d-flex align-items-center gap-3">
              <!-- Cart Button -->
              <a href="{{ url_for('cart.cart') }}" class="btn btn-outline-success position-relative">
                <i class="fas fa-shopping-cart"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart-badge">
                  0
                  <span class="visually-hidden">items in cart</span>
                </span>
              </a>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main class="pt-2" style="margin-top: 20px;">
    <!-- Breadcrumb -->
    <div class="container">
          <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{{ url_for('home.home') }}">Home</a></li>
          <li class="breadcrumb-item"><a href="{{ url_for('shop.shop') }}">Shop</a></li>
          <li class="breadcrumb-item active" aria-current="page" id="breadcrumb-product">{{ product.name }}</li>
        </ol>
      </nav>
    </div>

    <div class="container py-4">
      <div class="row">
        <!-- Product Images -->
        <div class="col-md-6">
          <div class="product-image-section">
            <div class="main-image mb-3">
              <img src="{{ url_for('static', filename='images/' + product.image) }}" alt="{{ product.name }}" id="product-img" class="img-fluid rounded shadow">
            </div>
            <!-- Thumbnail gallery -->
            <div class="thumbnail-gallery d-flex gap-2" id="thumbnail-gallery">
              <!-- Thumbnails will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Product Info -->
        <div class="col-md-6">
          <div class="product-info">
            <div class="product-badges mb-2" id="product-badges">
              <!-- Badges will be populated by JavaScript -->
            </div>
            
            <h1 class="product-title mb-3" id="product-title">{{ product.name }}</h1>
            
            <div class="product-rating mb-3">
              <div class="stars" id="product-rating">
                {% if product.rating %}
                  {% for i in range(5) %}
                    {% if i < product.rating|int %}
                      <i class="fas fa-star text-warning"></i>
                    {% else %}
                      <i class="far fa-star text-warning"></i>
                    {% endif %}
                  {% endfor %}
                {% else %}
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star-half-alt text-warning"></i>
                {% endif %}
              </div>
              <span class="rating-text text-muted ms-2">({{ product.rating if product.rating else '4.5' }}/5 reviews)</span>
            </div>
            
            <div class="price-section mb-4">
              <span class="current-price h3 text-success fw-bold" id="product-price">${{ "%.2f"|format(product.price) }}</span>
              <span class="original-price text-muted text-decoration-line-through ms-2" id="original-price" style="display: none;"></span>
              <span class="discount-badge badge bg-danger ms-2" id="discount-badge" style="display: none;"></span>
            </div>
            
            <div class="product-description mb-4">
              <h5>Description</h5>
              <p id="product-desc" class="text-muted">{{ product.description }}</p>
            </div>

            <!-- Product Features -->
            <div class="product-features mb-4" id="product-features">
              <h6>Key Features:</h6>
              <ul class="list-unstyled" id="features-list">
                {% if product.category == 'indoor' %}
                  <li><i class="fas fa-check text-success me-2"></i>Air purifying properties</li>
                  <li><i class="fas fa-check text-success me-2"></i>Perfect for indoor spaces</li>
                  <li><i class="fas fa-check text-success me-2"></i>Low to moderate light requirements</li>
                {% elif product.category == 'outdoor' %}
                  <li><i class="fas fa-check text-success me-2"></i>Weather resistant</li>
                  <li><i class="fas fa-check text-success me-2"></i>Thrives in natural sunlight</li>
                  <li><i class="fas fa-check text-success me-2"></i>Perfect for gardens and patios</li>
                {% elif product.category == 'pot' %}
                  <li><i class="fas fa-check text-success me-2"></i>Durable construction</li>
                  <li><i class="fas fa-check text-success me-2"></i>Proper drainage system</li>
                  <li><i class="fas fa-check text-success me-2"></i>Stylish design</li>
                {% elif product.category == 'accessories' %}
                  <li><i class="fas fa-check text-success me-2"></i>High-quality materials</li>
                  <li><i class="fas fa-check text-success me-2"></i>Functional design</li>
                  <li><i class="fas fa-check text-success me-2"></i>Long-lasting durability</li>
                {% endif %}
                <li><i class="fas fa-check text-success me-2"></i>Premium quality guaranteed</li>
              </ul>
            </div>

            <!-- Care Instructions -->
            <div class="care-instructions mb-4" id="care-instructions">
              <h6>Care Instructions:</h6>
              <div class="care-icons d-flex gap-3">
                <div class="care-item text-center">
                  <i class="fas fa-sun text-warning fs-4"></i>
                  <small class="d-block">Light</small>
                  <small class="text-muted" id="light-req">
                    {% if product.category == 'indoor' %}Bright Indirect
                    {% elif product.category == 'outdoor' %}Full Sun
                    {% else %}N/A
                    {% endif %}
                  </small>
                </div>
                <div class="care-item text-center">
                  <i class="fas fa-tint text-primary fs-4"></i>
                  <small class="d-block">Water</small>
                  <small class="text-muted" id="water-req">
                    {% if product.category == 'indoor' %}Weekly
                    {% elif product.category == 'outdoor' %}Bi-weekly
                    {% else %}N/A
                    {% endif %}
                  </small>
                </div>
                <div class="care-item text-center">
                  <i class="fas fa-thermometer-half text-info fs-4"></i>
                  <small class="d-block">Temp</small>
                  <small class="text-muted">
                    {% if product.category in ['indoor', 'outdoor'] %}65-75°F
                    {% else %}N/A
                    {% endif %}
                  </small>
                </div>
              </div>
            </div>

            <!-- Quantity and Add to Cart -->
            <div class="purchase-section">
              <div class="quantity-section mb-3">
                <label for="quantity" class="form-label">Quantity:</label>
                <div class="input-group quantity-input" style="width: 120px;">
                  <button class="btn btn-outline-secondary" type="button" id="decrease-qty">-</button>
                  <input type="number" class="form-control text-center" id="quantity" value="1" min="1" max="10">
                  <button class="btn btn-outline-secondary" type="button" id="increase-qty">+</button>
                </div>
              </div>
              
              <div class="action-buttons d-flex gap-2 mb-3">
                <button class="btn btn-success btn-lg flex-fill" id="add-to-cart"
                        data-product-id="{{ product.id }}" 
                        data-product-name="{{ product.name }}" 
                        data-product-price="{{ product.price }}" 
                        data-product-image="{{ url_for('static', filename='images/' + product.image) }}">
                  <i class="fas fa-shopping-cart me-2"></i>Add to Cart
                </button>
                <button class="btn btn-outline-danger" id="wishlist-btn" title="Add to Wishlist">
                  <i class="far fa-heart"></i>
                </button>
              </div>
              
              <div class="additional-actions d-flex gap-2">
                <a href="{{ url_for('shop.shop') }}" class="btn btn-outline-secondary">
                  <i class="fas fa-arrow-left me-1"></i>Continue Shopping
                </a>
                <button class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#shareModal">
                  <i class="fas fa-share-alt me-1"></i>Share
                </button>
              </div>
            </div>

            <!-- Product Info Tabs -->
            <div class="product-tabs mt-4">
              <ul class="nav nav-tabs" id="productTabs" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button" role="tab">Details</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" data-bs-target="#shipping" type="button" role="tab">Shipping</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">Reviews</button>
                </li>
              </ul>
              <div class="tab-content mt-3" id="productTabsContent">
                <div class="tab-pane fade show active" id="details" role="tabpanel">
                  <div class="specifications">
                    {% if product.category == 'indoor' %}
                    <div class="row g-4">
                      <div class="col-md-6">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-seedling text-success me-2"></i>Plant Specifications
                          </h6>
                          <div class="spec-list">
                            <div class="spec-row">
                              <span class="spec-label">Plant Type:</span>
                              <span class="spec-value">Indoor Houseplant</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Light Requirements:</span>
                              <span class="spec-value">Medium to Bright Indirect</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Watering:</span>
                              <span class="spec-value">Weekly or when soil is dry</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Humidity:</span>
                              <span class="spec-value">40-60%</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-info-circle text-primary me-2"></i>Care Information
                          </h6>
                          <div class="spec-list">
                            <div class="spec-row">
                              <span class="spec-label">Growth Size:</span>
                              <span class="spec-value">Medium to Large</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Temperature:</span>
                              <span class="spec-value">65-75°F (18-24°C)</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Pet Safety:</span>
                              <span class="spec-value">Check plant requirements</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Air Purifying:</span>
                              <span class="spec-value badge bg-success">Yes</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    {% elif product.category == 'outdoor' %}
                    <div class="row g-4">
                      <div class="col-md-6">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-tree text-success me-2"></i>Plant Specifications
                          </h6>
                          <div class="spec-list">
                            <div class="spec-row">
                              <span class="spec-label">Plant Type:</span>
                              <span class="spec-value">Outdoor Garden Plant</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Sun Requirements:</span>
                              <span class="spec-value">Full Sun to Partial Shade</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Watering:</span>
                              <span class="spec-value">Regular, varies by season</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Climate Zone:</span>
                              <span class="spec-value">Zones 5-9</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-info-circle text-primary me-2"></i>Additional Information
                          </h6>
                          <div class="spec-list">
                            <div class="spec-row">
                              <span class="spec-label">Growth Size:</span>
                              <span class="spec-value">Varies by plant type</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Soil Type:</span>
                              <span class="spec-value">Well-draining garden soil</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Season:</span>
                              <span class="spec-value">Spring to Fall</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Maintenance:</span>
                              <span class="spec-value badge bg-info">Low to Medium</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    {% elif product.category == 'pot' %}
                    <div class="row g-4">
                      <div class="col-md-6">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-cube text-success me-2"></i>Product Specifications
                          </h6>
                          <div class="spec-list">
                            <div class="spec-row">
                              <span class="spec-label">Material:</span>
                              <span class="spec-value">
                                {% if 'ceramic' in product.name.lower() %}Ceramic
                                {% elif 'terracotta' in product.name.lower() %}Terracotta Clay
                                {% elif 'gray' in product.name.lower() or 'ribbed' in product.name.lower() %}Premium Resin
                                {% else %}Mixed Material
                                {% endif %}
                              </span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Drainage:</span>
                              <span class="spec-value badge bg-success">Included</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Size:</span>
                              <span class="spec-value">
                                {% if 'large' in product.name.lower() %}Large (12-14 inches)
                                {% elif 'ribbed' in product.name.lower() %}Medium to Large (10-12 inches)
                                {% else %}Standard (8-10 inches)
                                {% endif %}
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-info-circle text-primary me-2"></i>Additional Information
                          </h6>
                          <div class="spec-list">
                            <div class="spec-row">
                              <span class="spec-label">Weight:</span>
                              <span class="spec-value">
                                {% if 'ceramic' in product.name.lower() %}Medium weight
                                {% elif 'ribbed' in product.name.lower() %}Lightweight
                                {% else %}Lightweight
                                {% endif %}
                              </span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Usage:</span>
                              <span class="spec-value badge bg-info">Indoor/Outdoor</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Maintenance:</span>
                              <span class="spec-value">Easy to clean</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Suitable Plants:</span>
                              <span class="spec-value">Most varieties</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    {% elif product.category == 'accessories' %}
                    <div class="row g-4">
                      <div class="col-md-6">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-tools text-success me-2"></i>Product Specifications
                          </h6>
                          <div class="spec-list">
                            <div class="spec-row">
                              <span class="spec-label">Category:</span>
                              <span class="spec-value badge bg-primary">Garden Accessories</span>
                            </div>
                            {% if 'shears' in product.name.lower() or 'tools' in product.name.lower() %}
                            <div class="spec-row">
                              <span class="spec-label">Material:</span>
                              <span class="spec-value">Stainless Steel</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Features:</span>
                              <span class="spec-value">Ergonomic handles</span>
                            </div>
                            {% elif 'watering' in product.name.lower() %}
                            <div class="spec-row">
                              <span class="spec-label">Capacity:</span>
                              <span class="spec-value">1.5L</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Material:</span>
                              <span class="spec-value">Rust-resistant metal</span>
                            </div>
                            {% elif 'gloves' in product.name.lower() %}
                            <div class="spec-row">
                              <span class="spec-label">Material:</span>
                              <span class="spec-value">Breathable fabric</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Size:</span>
                              <span class="spec-value">Universal fit</span>
                            </div>
                            {% elif 'meter' in product.name.lower() %}
                            <div class="spec-row">
                              <span class="spec-label">Functions:</span>
                              <span class="spec-value">3-in-1 Meter</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Power:</span>
                              <span class="spec-value badge bg-success">No Battery Required</span>
                            </div>
                            {% else %}
                            <div class="spec-row">
                              <span class="spec-label">Material:</span>
                              <span class="spec-value">Weather-resistant</span>
                            </div>
                            {% endif %}
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-shield-alt text-primary me-2"></i>Quality & Warranty
                          </h6>
                          <div class="spec-list">
                            <div class="spec-row">
                              <span class="spec-label">Warranty:</span>
                              <span class="spec-value badge bg-success">1 Year</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Quality:</span>
                              <span class="spec-value">Professional grade</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Use:</span>
                              <span class="spec-value">All plant care tasks</span>
                            </div>
                            <div class="spec-row">
                              <span class="spec-label">Rating:</span>
                              <span class="spec-value">
                                <span class="text-warning">★★★★★</span> Highly rated
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    {% else %}
                    <div class="row g-4">
                      <div class="col-12">
                        <div class="spec-card">
                          <h6 class="spec-title mb-3">
                            <i class="fas fa-box text-success me-2"></i>Product Information
                          </h6>
                          <div class="row">
                            <div class="col-md-8">
                              <p class="text-muted mb-3">{{ product.description }}</p>
                            </div>
                            <div class="col-md-4">
                              <div class="spec-list">
                                <div class="spec-row">
                                  <span class="spec-label">Product:</span>
                                  <span class="spec-value">{{ product.name }}</span>
                                </div>
                                <div class="spec-row">
                                  <span class="spec-label">Price:</span>
                                  <span class="spec-value text-success fw-bold">${{ "%.2f"|format(product.price) }}</span>
                                </div>
                                <div class="spec-row">
                                  <span class="spec-label">Category:</span>
                                  <span class="spec-value badge bg-primary">{{ product.category|title }}</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    {% endif %}
                  </div>
                </div>
                <div class="tab-pane fade" id="shipping" role="tabpanel">
                  <div class="shipping-info">
                    <p><i class="fas fa-truck text-success me-2"></i><strong>Free shipping</strong> on orders over $50</p>
                    <p><i class="fas fa-clock text-info me-2"></i><strong>Delivery time:</strong> 3-5 business days</p>
                    <p><i class="fas fa-undo text-warning me-2"></i><strong>Returns:</strong> 30-day return policy</p>
                    <p><i class="fas fa-shield-alt text-primary me-2"></i><strong>Guarantee:</strong> Plant health guaranteed for 7 days</p>
                  </div>
                </div>
                <div class="tab-pane fade" id="reviews" role="tabpanel">
                  <div class="reviews-section">
                    <div class="review-summary mb-4">
                      <div class="row">
                        <div class="col-md-4">
                          <div class="text-center">
                            <div class="display-4 text-success">4.5</div>
                            <div class="stars mb-2">
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star-half-alt text-warning"></i>
                            </div>
                            <small class="text-muted">Based on 127 reviews</small>
                          </div>
                        </div>
                        <div class="col-md-8">
                          <div class="rating-breakdown">
                            <div class="d-flex align-items-center mb-1">
                              <span class="me-2">5</span>
                              <div class="progress flex-fill me-2" style="height: 8px;">
                                <div class="progress-bar bg-success" style="width: 70%"></div>
                              </div>
                              <small class="text-muted">70%</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                              <span class="me-2">4</span>
                              <div class="progress flex-fill me-2" style="height: 8px;">
                                <div class="progress-bar bg-success" style="width: 20%"></div>
                              </div>
                              <small class="text-muted">20%</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                              <span class="me-2">3</span>
                              <div class="progress flex-fill me-2" style="height: 8px;">
                                <div class="progress-bar bg-warning" style="width: 7%"></div>
                              </div>
                              <small class="text-muted">7%</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                              <span class="me-2">2</span>
                              <div class="progress flex-fill me-2" style="height: 8px;">
                                <div class="progress-bar bg-warning" style="width: 2%"></div>
                              </div>
                              <small class="text-muted">2%</small>
                            </div>
                            <div class="d-flex align-items-center">
                              <span class="me-2">1</span>
                              <div class="progress flex-fill me-2" style="height: 8px;">
                                <div class="progress-bar bg-danger" style="width: 1%"></div>
                              </div>
                              <small class="text-muted">1%</small>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Sample Reviews -->
                    <div class="reviews-list">
                      <div class="review-item border-bottom pb-3 mb-3">
                        <div class="d-flex justify-content-between mb-2">
                          <div>
                            <strong>Sarah M.</strong>
                            <div class="stars">
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                            </div>
                          </div>
                          <small class="text-muted">2 weeks ago</small>
                        </div>
                        <p class="mb-0">Absolutely love this plant! It arrived in perfect condition and has been thriving in my living room. Great quality!</p>
                      </div>
                      
                      <div class="review-item border-bottom pb-3 mb-3">
                        <div class="d-flex justify-content-between mb-2">
                          <div>
                            <strong>Mike R.</strong>
                            <div class="stars">
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="fas fa-star text-warning"></i>
                              <i class="far fa-star text-muted"></i>
                            </div>
                          </div>
                          <small class="text-muted">1 month ago</small>
                        </div>
                        <p class="mb-0">Good plant, well packaged. Only took a few days to ship. Would recommend!</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Related Products Section -->
      <div class="related-products mt-5">
        <h3 class="mb-4">You might also like</h3>
        <div class="row" id="related-products">
          <!-- Show 3 random products from the same category or different categories -->
          {% set related_products = [] %}
          {% for p in products if p.id != product.id %}
            {% if related_products|length < 3 %}
              {% set _ = related_products.append(p) %}
            {% endif %}
          {% endfor %}
          {% for related_product in related_products %}
          <div class="col-md-4 mb-4">
            <div class="card h-100 product-card clickable-card" onclick="window.location.href='{{ url_for('product.product_detail', product_id=related_product.id) }}'" style="cursor: pointer; transition: transform 0.2s;">
              <img src="{{ url_for('static', filename='images/' + related_product.image) }}" class="card-img-top" alt="{{ related_product.name }}" style="height: 200px; object-fit: cover;">
              <div class="card-body d-flex flex-column">
                <div class="mb-2">
                  {% if related_product.is_popular %}
                    <span class="badge bg-warning me-1 small">Popular</span>
                  {% elif related_product.is_new %}
                    <span class="badge bg-success me-1 small">New</span>
                  {% elif related_product.is_on_sale %}
                    <span class="badge bg-danger me-1 small">Sale</span>
                  {% endif %}
                </div>
                <h6 class="card-title">{{ related_product.name }}</h6>
                <p class="card-text text-muted small flex-grow-1">{{ related_product.description[:70] }}...</p>
                <div class="mt-auto">
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold text-success">${{ "%.2f"|format(related_product.price) }}</span>
                    <a href="{{ url_for('product.product_detail', product_id=related_product.id) }}" class="btn btn-sm btn-outline-success" onclick="event.stopPropagation();">View Details</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Product Specifications -->
      <div class="product-specifications mt-5">
        <h3 class="mb-4 text-center">Product Specifications</h3>
        <div class="row g-4">
          <div class="col-md-6">
            <div class="card h-100 shadow-sm border-0" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);">
              <div class="card-body">
                <h5 class="card-title text-primary mb-3">
                  <i class="fas fa-list-ul me-2"></i>Detailed Specifications
                </h5>
                {% if product.category == 'indoor' %}
                <div class="specification-grid">
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-seedling me-2 text-success"></i>Plant Type:</span>
                    <span class="spec-value">Indoor Houseplant</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-sun me-2 text-warning"></i>Light Requirements:</span>
                    <span class="spec-value">Medium to Bright Indirect</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-tint me-2 text-primary"></i>Watering:</span>
                    <span class="spec-value">Weekly or when soil is dry</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-cloud me-2 text-info"></i>Humidity:</span>
                    <span class="spec-value">40-60%</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-arrows-alt me-2 text-secondary"></i>Growth Size:</span>
                    <span class="spec-value">Medium to Large</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2">
                    <span class="spec-label fw-semibold"><i class="fas fa-paw me-2 text-danger"></i>Pet Safety:</span>
                    <span class="spec-value">Check plant requirements</span>
                  </div>
                </div>
                {% elif product.category == 'outdoor' %}
                <div class="specification-grid">
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-tree me-2 text-success"></i>Plant Type:</span>
                    <span class="spec-value">Outdoor Garden Plant</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-sun me-2 text-warning"></i>Sun Requirements:</span>
                    <span class="spec-value">Full Sun to Partial Shade</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-tint me-2 text-primary"></i>Watering:</span>
                    <span class="spec-value">Regular, varies by season</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-thermometer-half me-2 text-info"></i>Climate Zone:</span>
                    <span class="spec-value">Zones 5-9</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-arrows-alt me-2 text-secondary"></i>Growth Size:</span>
                    <span class="spec-value">Varies by plant type</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2">
                    <span class="spec-label fw-semibold"><i class="fas fa-mountain me-2 text-brown"></i>Soil Type:</span>
                    <span class="spec-value">Well-draining garden soil</span>
                  </div>
                </div>
                {% elif product.category == 'pot' %}
                <div class="specification-grid">
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-cube me-2 text-success"></i>Material:</span>
                    <span class="spec-value">
                      {% if 'ceramic' in product.name.lower() %}Ceramic
                      {% elif 'terracotta' in product.name.lower() %}Terracotta Clay
                      {% elif 'gray' in product.name.lower() or 'ribbed' in product.name.lower() %}Premium Resin
                      {% else %}Mixed Material
                      {% endif %}
                    </span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-tint me-2 text-primary"></i>Drainage:</span>
                    <span class="spec-value">Drainage hole included</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-ruler me-2 text-warning"></i>Size:</span>
                    <span class="spec-value">
                      {% if 'large' in product.name.lower() %}Large (12-14 inches)
                      {% elif 'ribbed' in product.name.lower() %}Medium to Large (10-12 inches)
                      {% else %}Standard (8-10 inches)
                      {% endif %}
                    </span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-weight-hanging me-2 text-secondary"></i>Weight:</span>
                    <span class="spec-value">
                      {% if 'ceramic' in product.name.lower() %}Medium weight
                      {% elif 'ribbed' in product.name.lower() %}Lightweight
                      {% else %}Lightweight
                      {% endif %}
                    </span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-home me-2 text-info"></i>Use:</span>
                    <span class="spec-value">Indoor/Outdoor suitable</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2">
                    <span class="spec-label fw-semibold"><i class="fas fa-tools me-2 text-dark"></i>Care:</span>
                    <span class="spec-value">Easy to clean and maintain</span>
                  </div>
                </div>
                {% elif product.category == 'accessories' %}
                <div class="specification-grid">
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-tags me-2 text-success"></i>Category:</span>
                    <span class="spec-value">Garden Accessories</span>
                  </div>
                  {% if 'shears' in product.name.lower() or 'tools' in product.name.lower() %}
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-toolbox me-2 text-primary"></i>Includes:</span>
                    <span class="spec-value">Professional pruning shears</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-cube me-2 text-warning"></i>Material:</span>
                    <span class="spec-value">Stainless steel with ergonomic handles</span>
                  </div>
                  {% elif 'watering' in product.name.lower() %}
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-flask me-2 text-primary"></i>Capacity:</span>
                    <span class="spec-value">1.5L water capacity</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-cube me-2 text-warning"></i>Material:</span>
                    <span class="spec-value">Rust-resistant metal</span>
                  </div>
                  {% elif 'gloves' in product.name.lower() %}
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-cube me-2 text-warning"></i>Material:</span>
                    <span class="spec-value">Breathable fabric with reinforced palms</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-hand-paper me-2 text-info"></i>Size Range:</span>
                    <span class="spec-value">Universal fit</span>
                  </div>
                  {% elif 'meter' in product.name.lower() %}
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-tachometer-alt me-2 text-primary"></i>Functions:</span>
                    <span class="spec-value">Moisture, pH & Light meter</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-battery-half me-2 text-warning"></i>Power:</span>
                    <span class="spec-value">No battery required</span>
                  </div>
                  {% else %}
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-cube me-2 text-warning"></i>Material:</span>
                    <span class="spec-value">Durable, weather-resistant</span>
                  </div>
                  {% endif %}
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-shield-alt me-2 text-success"></i>Warranty:</span>
                    <span class="spec-value">1 year manufacturer warranty</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2 border-bottom">
                    <span class="spec-label fw-semibold"><i class="fas fa-leaf me-2 text-success"></i>Use:</span>
                    <span class="spec-value">Suitable for all plant care tasks</span>
                  </div>
                  <div class="spec-item d-flex justify-content-between py-2">
                    <span class="spec-label fw-semibold"><i class="fas fa-award me-2 text-primary"></i>Quality:</span>
                    <span class="spec-value">Professional grade</span>
                  </div>
                </div>
                {% endif %}
              </div>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="card h-100 shadow-sm border-0" style="background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);">
              <div class="card-body">
                <h5 class="card-title text-success mb-3">
                  <i class="fas fa-star me-2"></i>Product Features
                </h5>
                <div class="features-list">
                  {% if product.is_popular %}
                  <div class="feature-item d-flex align-items-center mb-3 p-3 rounded" style="background: rgba(255,193,7,0.1);">
                    <div class="feature-icon me-3">
                      <i class="fas fa-star text-warning fs-4"></i>
                    </div>
                    <div>
                      <strong class="text-warning">Most Popular Choice</strong>
                      <p class="mb-0 small text-muted">Customer favorite selection</p>
                    </div>
                  </div>
                  {% endif %}
                  {% if product.is_new %}
                  <div class="feature-item d-flex align-items-center mb-3 p-3 rounded" style="background: rgba(25,135,84,0.1);">
                    <div class="feature-icon me-3">
                      <i class="fas fa-sparkles text-success fs-4"></i>
                    </div>
                    <div>
                      <strong class="text-success">New Arrival</strong>
                      <p class="mb-0 small text-muted">Latest addition to our collection</p>
                    </div>
                  </div>
                  {% endif %}
                  {% if product.is_on_sale %}
                  <div class="feature-item d-flex align-items-center mb-3 p-3 rounded" style="background: rgba(220,53,69,0.1);">
                    <div class="feature-icon me-3">
                      <i class="fas fa-tag text-danger fs-4"></i>
                    </div>
                    <div>
                      <strong class="text-danger">Special Discount</strong>
                      <p class="mb-0 small text-muted">Limited time offer</p>
                    </div>
                  </div>
                  {% endif %}
                  
                  <div class="feature-item d-flex align-items-center mb-3 p-3 rounded" style="background: rgba(13,110,253,0.1);">
                    <div class="feature-icon me-3">
                      <i class="fas fa-award text-primary fs-4"></i>
                    </div>
                    <div>
                      <strong class="text-primary">Quality Guaranteed</strong>
                      <p class="mb-0 small text-muted">Premium quality assurance</p>
                    </div>
                  </div>
                  
                  <div class="feature-item d-flex align-items-center mb-3 p-3 rounded" style="background: rgba(13,202,240,0.1);">
                    <div class="feature-icon me-3">
                      <i class="fas fa-shipping-fast text-info fs-4"></i>
                    </div>
                    <div>
                      <strong class="text-info">Fast Shipping Available</strong>
                      <p class="mb-0 small text-muted">Quick delivery to your door</p>
                    </div>
                  </div>
                  
                  {% if product.category in ['indoor', 'outdoor'] %}
                  <div class="feature-item d-flex align-items-center mb-3 p-3 rounded" style="background: rgba(25,135,84,0.1);">
                    <div class="feature-icon me-3">
                      <i class="fas fa-leaf text-success fs-4"></i>
                    </div>
                    <div>
                      <strong class="text-success">Healthy & Vibrant</strong>
                      <p class="mb-0 small text-muted">Fresh and healthy plants</p>
                    </div>
                  </div>
                  
                  <div class="feature-item d-flex align-items-center mb-3 p-3 rounded" style="background: rgba(220,53,69,0.1);">
                    <div class="feature-icon me-3">
                      <i class="fas fa-heart text-danger fs-4"></i>
                    </div>
                    <div>
                      <strong class="text-danger">Easy Care Instructions</strong>
                      <p class="mb-0 small text-muted">Simple maintenance guide included</p>
                    </div>
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Share Modal -->
    <div class="modal fade" id="shareModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Share this product</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="d-grid gap-2">
              <button class="btn btn-primary" onclick="shareOnFacebook()">
                <i class="fab fa-facebook-f me-2"></i>Share on Facebook
              </button>
              <button class="btn btn-info" onclick="shareOnTwitter()">
                <i class="fab fa-twitter me-2"></i>Share on Twitter
              </button>
              <button class="btn btn-success" onclick="shareOnWhatsApp()">
                <i class="fab fa-whatsapp me-2"></i>Share on WhatsApp
              </button>
              <div class="input-group">
                <input type="text" class="form-control" id="shareUrl" readonly>
                <button class="btn btn-outline-secondary" onclick="copyToClipboard()">Copy Link</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  {% include 'components/footer.html' %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Enhanced Product data lookup
    const productData = {
      1: { 
        name: "Snake Plant", 
        price: "$25.00", 
        originalPrice: "$35.00",
        image: "../../Image/plants/indoor/snake-plant.jpg", 
        images: ["../../Image/plants/indoor/snake-plant.jpg"],
        desc: "Perfect for beginners. Low maintenance and air-purifying. The Snake Plant is one of the most popular houseplants due to its striking appearance and incredibly easy care requirements.",
        category: "Indoor Plants",
        badges: ["Best Seller", "Beginner Friendly"],
        features: ["Air purifying", "Low light tolerant", "Drought resistant", "Pet safe alternative available"],
        care: { light: "Low-Bright", water: "Monthly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Sansevieria trifasciata",
          "Plant Type": "Succulent",
          "Mature Size": "2-4 feet tall",
          "Sun Exposure": "Partial shade to bright indirect light",
          "Soil Type": "Well-draining potting mix",
          "Bloom Time": "Spring (rarely indoors)"
        },
        related: [2, 9, 3]
      },
      2: { 
        name: "Monstera Deliciosa", 
        price: "$30.00", 
        image: "../../Image/plants/indoor/monstera.jpg", 
        images: ["../../Image/plants/indoor/monstera.jpg"],
        desc: "Stunning split leaves that create beautiful shadows. This iconic plant is perfect for adding a tropical touch to any space with its distinctive fenestrated leaves.",
        category: "Indoor Plants",
        badges: ["Trending", "Instagram Favorite"],
        features: ["Split leaf design", "Fast growing", "Can climb with support", "Air purifying"],
        care: { light: "Bright", water: "Weekly", difficulty: "Moderate" },
        specs: {
          "Scientific Name": "Monstera deliciosa",
          "Plant Type": "Tropical vine",
          "Mature Size": "6-10 feet indoors",
          "Sun Exposure": "Bright indirect light",
          "Soil Type": "Well-draining, peat-based mix",
          "Growth Rate": "Fast"
        },
        related: [4, 1, 9]
      },
      3: { 
        name: "Peace Lily", 
        price: "$20.00", 
        image: "../../Image/plants/indoor/peace-lily.jpg", 
        images: ["../../Image/plants/indoor/peace-lily.jpg"],
        desc: "Elegant white blooms and excellent air purification. The Peace Lily is perfect for bringing serenity and clean air to your home or office.",
        category: "Indoor Plants",
        badges: ["Air Purifier", "Blooming Plant"],
        features: ["White flowers", "Air purifying", "Low light tolerant", "Humidity loving"],
        care: { light: "Low-Medium", water: "Weekly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Spathiphyllum",
          "Plant Type": "Flowering perennial",
          "Mature Size": "1-3 feet",
          "Sun Exposure": "Low to medium indirect light",
          "Soil Type": "Well-draining potting soil",
          "Bloom Time": "Spring to fall"
        },
        related: [1, 9, 4]
      },
      4: { 
        name: "Fiddle Leaf Fig", 
        price: "$35.00", 
        originalPrice: "$45.00",
        image: "../../Image/plants/indoor/fiddle-leaf-fig.jpg", 
        images: ["../../Image/plants/indoor/fiddle-leaf-fig.jpg"],
        desc: "Statement plant with large, glossy leaves. This architectural beauty is perfect for modern homes and adds a bold, tropical feel to any room.",
        category: "Indoor Plants",
        badges: ["Statement Plant", "Designer Favorite"],
        features: ["Large glossy leaves", "Architectural form", "Can grow very tall", "Instagram worthy"],
        care: { light: "Bright", water: "Weekly", difficulty: "Challenging" },
        specs: {
          "Scientific Name": "Ficus lyrata",
          "Plant Type": "Broadleaf evergreen",
          "Mature Size": "6-10 feet indoors",
          "Sun Exposure": "Bright indirect light",
          "Soil Type": "Well-draining potting mix",
          "Growth Rate": "Moderate"
        },
        related: [2, 14, 3]
      },
      5: { 
        name: "Lavender", 
        price: "$15.00", 
        image: "../../Image/plants/outdoor/lavender.jpg", 
        images: ["../../Image/plants/outdoor/lavender.jpg"],
        desc: "Fragrant purple blooms perfect for gardens. Lavender not only looks beautiful but also provides a calming fragrance and attracts beneficial pollinators.",
        category: "Outdoor Plants",
        badges: ["Fragrant", "Pollinator Friendly"],
        features: ["Purple fragrant flowers", "Drought tolerant", "Attracts bees", "Culinary uses"],
        care: { light: "Full Sun", water: "Bi-weekly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Lavandula",
          "Plant Type": "Perennial herb",
          "Mature Size": "1-3 feet",
          "Sun Exposure": "Full sun",
          "Soil Type": "Well-draining, sandy soil",
          "Bloom Time": "Summer"
        },
        related: [6, 1, 9]
      },
      6: { 
        name: "Rosemary", 
        price: "$12.00", 
        image: "../../Image/plants/outdoor/rosemary.jpg", 
        images: ["../../Image/plants/outdoor/rosemary.jpg"],
        desc: "Aromatic herb perfect for cooking and gardens. This Mediterranean herb is not only beautiful but also useful in the kitchen with its pine-like fragrance.",
        category: "Outdoor Plants",
        badges: ["Culinary Herb", "Aromatic"],
        features: ["Culinary herb", "Evergreen", "Drought tolerant", "Aromatic foliage"],
        care: { light: "Full Sun", water: "Bi-weekly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Rosmarinus officinalis",
          "Plant Type": "Perennial herb",
          "Mature Size": "2-6 feet",
          "Sun Exposure": "Full sun",
          "Soil Type": "Well-draining, sandy soil",
          "Growth Rate": "Moderate"
        },
        related: [5, 2, 14]
      },
      9: { 
        name: "Golden Pothos", 
        price: "$18.00", 
        image: "../../Image/plants/indoor/golden_potho.jpg", 
        images: ["../../Image/plants/indoor/golden_potho.jpg"],
        desc: "Easy trailing plant, great for shelves and hanging baskets. Known as 'Devil's Ivy' for its ability to thrive in almost any condition.",
        category: "Indoor Plants",
        badges: ["Beginner Friendly", "Trailing Plant"],
        features: ["Trailing vine", "Very easy care", "Air purifying", "Fast growing"],
        care: { light: "Low-Bright", water: "Weekly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Epipremnum aureum",
          "Plant Type": "Trailing vine",
          "Mature Size": "6-10 feet long",
          "Sun Exposure": "Low to bright indirect light",
          "Soil Type": "Well-draining potting mix",
          "Growth Rate": "Fast"
        },
        related: [1, 3, 13]
      },
      13: { 
        name: "Lucky Bamboo", 
        price: "$14.00", 
        image: "../../Image/plants/indoor/Lucky_Bamboo.jpg", 
        images: ["../../Image/plants/indoor/Lucky_Bamboo.jpg"],
        desc: "Symbol of good fortune and prosperity. This low-maintenance plant is perfect for offices and brings positive energy according to Feng Shui.",
        category: "Indoor Plants",
        badges: ["Good Luck", "Office Plant"],
        features: ["Symbol of luck", "Can grow in water", "Low maintenance", "Feng Shui plant"],
        care: { light: "Medium", water: "Weekly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Dracaena sanderiana",
          "Plant Type": "Perennial",
          "Mature Size": "1-3 feet",
          "Sun Exposure": "Bright indirect light",
          "Soil Type": "Can grow in water or soil",
          "Growth Rate": "Slow"
        },
        related: [1, 9, 11]
      },
      14: { 
        name: "Money Tree", 
        price: "$27.00", 
        image: "../../Image/plants/indoor/money_tree.jpg", 
        images: ["../../Image/plants/indoor/money_tree.jpg"],
        desc: "Braided trunk plant believed to bring wealth. This unique plant with its braided trunk and glossy leaves is both beautiful and meaningful.",
        category: "Indoor Plants",
        badges: ["Good Fortune", "Unique Design"],
        features: ["Braided trunk", "Symbol of wealth", "Easy care", "Glossy leaves"],
        care: { light: "Bright", water: "Weekly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Pachira aquatica",
          "Plant Type": "Broadleaf evergreen",
          "Mature Size": "3-6 feet indoors",
          "Sun Exposure": "Bright indirect light",
          "Soil Type": "Well-draining potting mix",
          "Growth Rate": "Moderate"
        },
        related: [4, 2, 13]
      },
      7: { 
        name: "Sunflower", 
        price: "$18.00", 
        image: "../../Image/plants/outdoor/sunflower.jpg", 
        images: ["../../Image/plants/outdoor/sunflower.jpg"],
        desc: "Bright yellow blooms that follow the sun. These cheerful flowers bring joy and warmth to any garden space.",
        category: "Outdoor Plants",
        badges: ["Cheerful", "Sun Loving"],
        features: ["Bright yellow flowers", "Follows the sun", "Attracts birds", "Easy to grow"],
        care: { light: "Full Sun", water: "Daily", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Helianthus annuus",
          "Plant Type": "Annual flower",
          "Mature Size": "6-10 feet",
          "Sun Exposure": "Full sun",
          "Soil Type": "Well-draining soil",
          "Bloom Time": "Summer to fall"
        },
        related: [5, 6, 8]
      },
      8: { 
        name: "Jasmine", 
        price: "$20.00", 
        image: "../../Image/plants/outdoor/jasmine_plant.jpg", 
        images: ["../../Image/plants/outdoor/jasmine_plant.jpg"],
        desc: "Fragrant white blooms perfect for balconies and gardens. This climbing plant offers beautiful flowers and sweet fragrance.",
        category: "Outdoor Plants",
        badges: ["Fragrant", "Climbing"],
        features: ["Sweet fragrance", "White flowers", "Climbing vine", "Evening scent"],
        care: { light: "Partial Sun", water: "Bi-weekly", difficulty: "Moderate" },
        specs: {
          "Scientific Name": "Jasminum",
          "Plant Type": "Climbing vine",
          "Mature Size": "4-8 feet",
          "Sun Exposure": "Partial to full sun",
          "Soil Type": "Well-draining soil",
          "Bloom Time": "Spring to fall"
        },
        related: [7, 5, 6]
      },
      10: { 
        name: "Dracaena", 
        price: "$28.00", 
        image: "../../Image/plants/indoor/Dracaena_plants.jpg", 
        images: ["../../Image/plants/indoor/Dracaena_plants.jpg"],
        desc: "Striking architectural plant with colorful foliage. Perfect for modern interiors and offices.",
        category: "Indoor Plants",
        badges: ["Air Purifier", "Office Plant"],
        features: ["Colorful leaves", "Air purifying", "Low maintenance", "Architectural form"],
        care: { light: "Medium", water: "Weekly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Dracaena marginata",
          "Plant Type": "Evergreen shrub",
          "Mature Size": "4-6 feet indoors",
          "Sun Exposure": "Bright indirect light",
          "Soil Type": "Well-draining potting mix",
          "Growth Rate": "Slow"
        },
        related: [1, 3, 9]
      },
      11: { 
        name: "Jade Plant", 
        price: "$16.00", 
        image: "../../Image/plants/indoor/Jade Plant.jpg", 
        images: ["../../Image/plants/indoor/Jade Plant.jpg"],
        desc: "Succulent with thick, glossy leaves. Symbol of good luck and prosperity in many cultures.",
        category: "Indoor Plants",
        badges: ["Succulent", "Good Luck"],
        features: ["Thick glossy leaves", "Drought tolerant", "Symbol of prosperity", "Easy care"],
        care: { light: "Bright", water: "Monthly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Crassula ovata",
          "Plant Type": "Succulent",
          "Mature Size": "1-3 feet",
          "Sun Exposure": "Bright light",
          "Soil Type": "Cactus/succulent mix",
          "Growth Rate": "Slow"
        },
        related: [13, 1, 14]
      },
      12: { 
        name: "Palm Tree", 
        price: "$24.00", 
        image: "../../Image/plants/outdoor/palm_tree.jpg", 
        images: ["../../Image/plants/outdoor/palm_tree.jpg"],
        desc: "Tropical palm perfect for patios and gardens. Brings a vacation vibe to any outdoor space.",
        category: "Outdoor Plants",
        badges: ["Tropical", "Statement Plant"],
        features: ["Tropical appearance", "Large fronds", "Heat tolerant", "Exotic look"],
        care: { light: "Full Sun", water: "Weekly", difficulty: "Moderate" },
        specs: {
          "Scientific Name": "Phoenix canariensis",
          "Plant Type": "Palm tree",
          "Mature Size": "8-12 feet",
          "Sun Exposure": "Full sun to partial shade",
          "Soil Type": "Well-draining soil",
          "Growth Rate": "Slow"
        },
        related: [7, 8, 5]
      },
      15: { 
        name: "Kentia Palm", 
        price: "$19.00", 
        image: "../../Image/plants/outdoor/Kentia_Palm.jpg", 
        images: ["../../Image/plants/outdoor/Kentia_Palm.jpg"],
        desc: "Elegant palm with graceful fronds. Perfect for adding tropical elegance to outdoor spaces.",
        category: "Outdoor Plants",
        badges: ["Elegant", "Tropical"],
        features: ["Graceful fronds", "Elegant appearance", "Shade tolerant", "Low maintenance"],
        care: { light: "Partial Shade", water: "Weekly", difficulty: "Easy" },
        specs: {
          "Scientific Name": "Howea forsteriana",
          "Plant Type": "Palm tree",
          "Mature Size": "6-10 feet",
          "Sun Exposure": "Partial shade",
          "Soil Type": "Well-draining soil",
          "Growth Rate": "Slow"
        },
        related: [12, 6, 7]
      },
      16: { 
        name: "Bloom Pine Watering Can", 
        price: "$35.00", 
        image: "../../Image/plants/accessories/Bloom_Pine_Watering_Can.jpg", 
        images: ["../../Image/plants/accessories/Bloom_Pine_Watering_Can.jpg"],
        desc: "Stylish watering can perfect for indoor plants. Made from durable materials with elegant design.",
        category: "Accessories",
        badges: ["Stylish", "Functional"],
        features: ["Elegant design", "Durable material", "Perfect size", "Easy to use"],
        care: { light: "N/A", water: "N/A", difficulty: "N/A" },
        specs: {
          "Material": "Metal with coating",
          "Capacity": "1.5 liters",
          "Dimensions": "12 x 6 x 8 inches",
          "Weight": "1.2 lbs",
          "Color": "Pine Green",
          "Use": "Indoor/Outdoor watering"
        },
        related: [17, 18, 1]
      },
      17: { 
        name: "Gardening Gloves", 
        price: "$12.00", 
        image: "../../Image/plants/accessories/Gardening_Gloves.jpg", 
        images: ["../../Image/plants/accessories/Gardening_Gloves.jpg"],
        desc: "Durable gloves for all your gardening needs. Comfortable fit with excellent grip and protection.",
        category: "Accessories",
        badges: ["Protective", "Comfortable"],
        features: ["Durable material", "Comfortable fit", "Good grip", "Machine washable"],
        care: { light: "N/A", water: "N/A", difficulty: "N/A" },
        specs: {
          "Material": "Synthetic leather palm",
          "Sizes": "S, M, L, XL",
          "Features": "Reinforced fingertips",
          "Care": "Machine washable",
          "Color": "Green and brown",
          "Use": "General gardening"
        },
        related: [16, 19, 20]
      },
      18: { 
        name: "Resin Vertical Ribbed Pot", 
        price: "$28.00", 
        image: "../../Image/plants/accessories/Resin_Vertical_Ribbed_Pot.jpg", 
        images: ["../../Image/plants/accessories/Resin_Vertical_Ribbed_Pot.jpg"],
        desc: "Modern ribbed pot perfect for any plant. Durable resin construction with contemporary design.",
        category: "Accessories",
        badges: ["Modern", "Durable"],
        features: ["Ribbed texture", "Lightweight resin", "Drainage holes", "Weather resistant"],
        care: { light: "N/A", water: "N/A", difficulty: "N/A" },
        specs: {
          "Material": "High-quality resin",
          "Dimensions": "8 x 8 x 10 inches",
          "Weight": "2.1 lbs",
          "Drainage": "Multiple holes",
          "Color": "Charcoal gray",
          "Use": "Indoor/Outdoor"
        },
        related: [19, 20, 21]
      },
      19: { 
        name: "White Ceramic Pot", 
        price: "$25.00", 
        image: "../../Image/plants/pot/ceramic-pot-white.jpg", 
        images: ["../../Image/plants/pot/ceramic-pot-white.jpg"],
        desc: "Elegant white ceramic pot with smooth finish and drainage holes. Perfect for showcasing your favorite plants.",
        category: "Pots & Planters",
        badges: ["Elegant", "Classic"],
        features: ["Smooth ceramic finish", "Drainage holes", "Classic white color", "Versatile size"],
        care: { light: "N/A", water: "N/A", difficulty: "N/A" },
        specs: {
          "Material": "High-quality ceramic",
          "Dimensions": "6 x 6 x 6 inches",
          "Weight": "1.8 lbs",
          "Drainage": "Single drainage hole",
          "Color": "Pure white",
          "Use": "Indoor plants"
        },
        related: [20, 21, 1]
      },
      20: { 
        name: "Terracotta Pot", 
        price: "$18.00", 
        image: "../../Image/plants/pot/terracotta-pot.jpg", 
        images: ["../../Image/plants/pot/terracotta-pot.jpg"],
        desc: "Classic terracotta pot with excellent drainage and natural clay material. Perfect for plants that need good airflow.",
        category: "Pots & Planters",
        badges: ["Classic", "Natural"],
        features: ["Natural clay material", "Excellent drainage", "Breathable walls", "Classic design"],
        care: { light: "N/A", water: "N/A", difficulty: "N/A" },
        specs: {
          "Material": "Natural terracotta clay",
          "Dimensions": "7 x 7 x 7 inches",
          "Weight": "2.3 lbs",
          "Drainage": "Natural porosity + hole",
          "Color": "Natural terracotta",
          "Use": "Indoor/Outdoor"
        },
        related: [19, 22, 2]
      },
      21: { 
        name: "Modern Black Pot", 
        price: "$32.00", 
        image: "../../Image/plants/pot/modern-black-pot.jpg", 
        images: ["../../Image/plants/pot/modern-black-pot.jpg"],
        desc: "Sleek modern black pot with matte finish for contemporary decor. Perfect for modern interior styles.",
        category: "Pots & Planters",
        badges: ["Modern", "Stylish"],
        features: ["Matte black finish", "Contemporary design", "Lightweight", "UV resistant"],
        care: { light: "N/A", water: "N/A", difficulty: "N/A" },
        specs: {
          "Material": "Fiber cement composite",
          "Dimensions": "8 x 8 x 8 inches",
          "Weight": "2.5 lbs",
          "Drainage": "Drainage hole included",
          "Color": "Matte black",
          "Use": "Indoor/Outdoor"
        },
        related: [22, 23, 4]
      },
      22: { 
        name: "Decorative Planter", 
        price: "$45.00", 
        image: "../../Image/plants/pot/decorative-planter.jpg", 
        images: ["../../Image/plants/pot/decorative-planter.jpg"],
        desc: "Beautiful decorative planter with intricate design patterns. A statement piece for any plant lover.",
        category: "Pots & Planters",
        badges: ["Decorative", "Premium"],
        features: ["Intricate patterns", "Premium materials", "Unique design", "Conversation starter"],
        care: { light: "N/A", water: "N/A", difficulty: "N/A" },
        specs: {
          "Material": "Ceramic with glazed finish",
          "Dimensions": "10 x 10 x 12 inches",
          "Weight": "4.2 lbs",
          "Drainage": "Removable plug",
          "Color": "Multi-colored pattern",
          "Use": "Indoor decoration"
        },
        related: [21, 23, 3]
      },
      23: { 
        name: "Large Ceramic Pot", 
        price: "$38.00", 
        image: "../../Image/plants/pot/large-ceramic-pot.jpg", 
        images: ["../../Image/plants/pot/large-ceramic-pot.jpg"],
        desc: "Large ceramic pot perfect for big plants and statement pieces. Spacious design for growing larger plants.",
        category: "Pots & Planters",
        badges: ["Large Size", "Spacious"],
        features: ["Extra large size", "Heavy duty ceramic", "Professional grade", "Statement piece"],
        care: { light: "N/A", water: "N/A", difficulty: "N/A" },
        specs: {
          "Material": "High-grade ceramic",
          "Dimensions": "12 x 12 x 14 inches",
          "Weight": "6.8 lbs",
          "Drainage": "Large drainage hole",
          "Color": "Natural ceramic",
          "Use": "Large indoor plants"
        },
        related: [19, 22, 14]
      }
    };

    // Enhanced query param handling and product display
    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    function displayProduct(pid) {
      if (!pid || !productData[pid]) {
        document.getElementById('product-title').textContent = 'Product Not Found';
        document.getElementById('product-desc').textContent = 'Sorry, this product could not be found.';
        return;
      }

      const product = productData[pid];
      
      // Update basic product info
      document.getElementById('product-title').textContent = product.name;
      document.getElementById('product-price').textContent = product.price;
      document.getElementById('product-img').src = product.image;
      document.getElementById('product-img').alt = product.name;
      document.getElementById('product-desc').textContent = product.desc;
      document.getElementById('breadcrumb-product').textContent = product.name;
      
      // Update pricing with discounts
      if (product.originalPrice) {
        document.getElementById('original-price').textContent = product.originalPrice;
        document.getElementById('original-price').style.display = 'inline';
        const discount = Math.round((1 - parseFloat(product.price.replace('$', '')) / parseFloat(product.originalPrice.replace('$', ''))) * 100);
        document.getElementById('discount-badge').textContent = `-${discount}%`;
        document.getElementById('discount-badge').style.display = 'inline';
      }
      
      // Update badges
      if (product.badges) {
        const badgesContainer = document.getElementById('product-badges');
        badgesContainer.innerHTML = product.badges.map(badge => 
          `<span class="badge bg-success me-1">${badge}</span>`
        ).join('');
      }
      
      // Update features
      if (product.features) {
        const featuresList = document.getElementById('features-list');
        featuresList.innerHTML = product.features.map(feature => 
          `<li><i class="fas fa-check text-success me-2"></i>${feature}</li>`
        ).join('');
      }
      
      // Update care instructions
      if (product.care) {
        document.getElementById('light-req').textContent = product.care.light;
        document.getElementById('water-req').textContent = product.care.water;
      }
      
      // Update thumbnail gallery
      if (product.images) {
        const thumbnailContainer = document.getElementById('thumbnail-gallery');
        thumbnailContainer.innerHTML = product.images.map((img, index) => 
          `<img src="${img}" alt="Product view ${index + 1}" class="thumbnail-img border rounded" 
            style="width: 60px; height: 60px; object-fit: cover; cursor: pointer;" 
            onclick="changeMainImage('${img}')">`
        ).join('');
      }
      
      // Generate related products
      displayRelatedProducts(product.related || []);
      
      // Update add to cart button with product data
      const addToCartBtn = document.getElementById('add-to-cart');
      addToCartBtn.setAttribute('data-product-id', pid);
      addToCartBtn.setAttribute('data-product-name', product.name);
      addToCartBtn.setAttribute('data-product-price', product.price.replace('$', ''));
      addToCartBtn.setAttribute('data-product-image', product.image);
      
      // Update share URL
      document.getElementById('shareUrl').value = window.location.href;
    }

    function changeMainImage(imageSrc) {
      document.getElementById('product-img').src = imageSrc;
    }

    function displayRelatedProducts(relatedIds) {
      const container = document.getElementById('related-products');
      
      // If no related products specified, get random 3 products
      if (!relatedIds || relatedIds.length === 0) {
        const allProductIds = Object.keys(productData);
        relatedIds = allProductIds.sort(() => 0.5 - Math.random()).slice(0, 3);
      }
      
      // Filter out any non-existing products and ensure we have exactly 3
      const validProducts = relatedIds.filter(id => productData[id]).slice(0, 3);
      
      // If we still don't have 3, fill with random products
      if (validProducts.length < 3) {
        const allProductIds = Object.keys(productData);
        const availableIds = allProductIds.filter(id => !validProducts.includes(id));
        const additionalProducts = availableIds.sort(() => 0.5 - Math.random()).slice(0, 3 - validProducts.length);
        validProducts.push(...additionalProducts);
      }
      
      container.innerHTML = validProducts.map(id => {
        const product = productData[id];
        if (!product) return '';
        
        return `
          <div class="col-md-4 mb-4">
            <div class="card h-100 product-card clickable-card" onclick="window.location.href='product_detail.html?product=${id}'" style="cursor: pointer; transition: transform 0.2s;">
              <img src="${product.image}" class="card-img-top" alt="${product.name}" style="height: 200px; object-fit: cover;">
              <div class="card-body d-flex flex-column">
                <div class="mb-2">
                  ${product.badges ? product.badges.slice(0, 1).map(badge => `<span class="badge bg-success me-1 small">${badge}</span>`).join('') : ''}
                </div>
                <h6 class="card-title">${product.name}</h6>
                <p class="card-text text-muted small flex-grow-1">${product.desc.substring(0, 70)}...</p>
                <div class="mt-auto">
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold text-success">${product.price}</span>
                    <a href="product_detail.html?product=${id}" class="btn btn-sm btn-outline-success" onclick="event.stopPropagation();">View Details</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    // Initialize product display - removed since Flask provides the data directly
    // const pid = getQueryParam('product');
    // displayProduct(pid);

    // Quantity controls
    document.getElementById('increase-qty').addEventListener('click', function() {
      const qtyInput = document.getElementById('quantity');
      const currentQty = parseInt(qtyInput.value);
      if (currentQty < 10) {
        qtyInput.value = currentQty + 1;
      }
    });

    document.getElementById('decrease-qty').addEventListener('click', function() {
      const qtyInput = document.getElementById('quantity');
      const currentQty = parseInt(qtyInput.value);
      if (currentQty > 1) {
        qtyInput.value = currentQty - 1;
      }
    });

    // Wishlist functionality
    document.getElementById('wishlist-btn').addEventListener('click', function() {
      const heartIcon = this.querySelector('i');
      if (heartIcon.classList.contains('far')) {
        heartIcon.classList.remove('far');
        heartIcon.classList.add('fas');
        this.classList.add('btn-danger');
        this.classList.remove('btn-outline-danger');
        this.title = 'Remove from Wishlist';
      } else {
        heartIcon.classList.remove('fas');
        heartIcon.classList.add('far');
        this.classList.remove('btn-danger');
        this.classList.add('btn-outline-danger');
        this.title = 'Add to Wishlist';
      }
    });

    // Enhanced Add to cart functionality
    document.getElementById('add-to-cart').addEventListener('click', function() {
      const quantity = parseInt(document.getElementById('quantity').value);
      const productData = {
        id: this.getAttribute('data-product-id'),
        name: this.getAttribute('data-product-name'),
        price: parseFloat(this.getAttribute('data-product-price')),
        image: this.getAttribute('data-product-image')
      };
      
      // Get cart from localStorage
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      
      const existingItem = cart.find(item => item.id === productData.id);
      
      if (existingItem) {
        existingItem.quantity += quantity;
      } else {
        cart.push({ ...productData, quantity: quantity });
      }
      
      // Save to localStorage
      localStorage.setItem('cart', JSON.stringify(cart));
      
      // Update cart badge
      updateCartBadge(cart);
      
      // Show success animation
      this.innerHTML = '<i class="fas fa-check me-2"></i>Added to Cart!';
      this.classList.add('btn-success');
      this.disabled = true;
      
      setTimeout(() => {
        this.innerHTML = '<i class="fas fa-shopping-cart me-2"></i>Add to Cart';
        this.classList.remove('btn-success');
        this.disabled = false;
      }, 2000);
    });

    // Share functionality
    function shareOnFacebook() {
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent(`Check out this amazing plant: ${document.getElementById('product-title').textContent}`);
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
    }

    function shareOnTwitter() {
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent(`Check out this amazing plant: ${document.getElementById('product-title').textContent} 🌱`);
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
    }

    function shareOnWhatsApp() {
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent(`Check out this amazing plant: ${document.getElementById('product-title').textContent} ${url}`);
      window.open(`https://wa.me/?text=${text}`, '_blank');
    }

    function copyToClipboard() {
      const shareUrl = document.getElementById('shareUrl');
      shareUrl.select();
      shareUrl.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(shareUrl.value).then(() => {
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = 'Copied!';
        button.classList.add('btn-success');
        setTimeout(() => {
          button.textContent = originalText;
          button.classList.remove('btn-success');
        }, 2000);
      });
    }

    // Update cart badge function
    function updateCartBadge(cart) {
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const cartBadge = document.getElementById('cart-badge');
      if (cartBadge) {
        cartBadge.textContent = totalItems;
      }
    }

    // Initialize cart badge on page load
    document.addEventListener('DOMContentLoaded', function() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      updateCartBadge(cart);
    });

    // Also update on page visibility change (when user returns from cart)
    document.addEventListener('visibilitychange', function() {
      if (!document.hidden) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        updateCartBadge(cart);
      }
    });
  </script>
</body>
</html>
